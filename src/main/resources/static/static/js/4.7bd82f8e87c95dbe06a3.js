webpackJsonp([4],{C7be:function(e,t){},FS42:function(e,t,r){"use strict";(function(e){var n=r("Xxa5"),a=r.n(n),o=r("NC6I"),i=r.n(o),s=r("D2Ra"),l=r("NYxO"),c=r("kw8N"),d=(r.n(c),r("OXi9")),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),s=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}t.a={name:"",components:{Empty:d.a},data:function(){return{orderID:"",distributorOrderID:"",loading:!1,isToDelete:!1,code:"3",content:"",orderDetailInfo:"",error:!1}},methods:f({},Object(l.b)(["choiceMenuId"]),{returnHeaders:function(e){var t=(new Date).getTime()+"",r={timestamp:t,interfacekey:"15456a8b-f9b3-4e39-83cf-7186b9cb6336",requesttype:e,signature:i()(t+109+i()("15456a8b-f9b3-4e39-83cf-7186b9cb6336").toUpperCase()+104+e).toUpperCase(),"Content-Type":"application/json;charset=UTF-8"};return this.hoteltype&&(r.hoteltype="3"),r},reqOrderDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v(a.a.mark(function r(){var n,o,i,l,c,d,f,v;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.orderID,o=e.distributorOrderID,!n||!o){r.next=12;break}return i=e.returnHeaders("ORDER_DETAIL"),l={orderID:n,distributorOrderID:o},e.loading=!0,r.next=7,Object(s.y)({searchCandidate:l},i);case 7:c=r.sent,e.loading=!1,d=c.ResponseStatus,e.isToDelete=!1,d&&0==d.Errors.length?(c.orderDetailInfo?(e.orderDetailInfo=c.orderDetailInfo,console.log(e.orderDetailInfo),e.error=!1):(e.orderDetailInfo={},e.error=!0),t&&!e.error&&(2==(f=e.orderDetailInfo).orderStatus||1==f.orderStatus?e.cancleOrder():(e.code="3",e.content="",3==f.orderStatus?e.message("订单取消中","warning",1500):4==f.orderStatus?e.message("订单已确认-已处理,无法取消","warning",1500):5==f.orderStatus&&e.message("订单已取消-已处理","warning",1500)))):(e.code="3",e.content="",e.error=!0,v="请求出错",e.message(v,"error",2e3));case 12:case"end":return r.stop()}},r,e)}))()},toCancleOrder:function(){this.isToDelete=!0},toCancle:function(){this.isToDelete=!1,this.code="3",this.content=""},cancleOrder:function(){var e=this;return v(a.a.mark(function t(){var r,n,o,i,l,c,d;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.orderID,n=e.code,o=e.content,e.code="3",e.content="",!r){t.next=11;break}return i=e.returnHeaders("ORDER_CANCEL"),l={code:n,content:o},t.next=8,Object(s.x)({orderID:r,cancelReason:l},i);case 8:c=t.sent,0==c.ResponseStatus.Errors.length?0==(d=c.message).code?(clearInterval(e.reqCancleOrder),e.reqCancleOrder=setInterval(v(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.cancleOrder();case 1:case"end":return t.stop()}},t,e)})),1e3)):3==d.code?(clearInterval(e.reqCancleOrder),e.message(d.message,"success",1500),e.reqOrderDetail()):(clearInterval(e.reqCancleOrder),e.message(d.message,"error",2e3)):(clearInterval(e.reqCancleOrder),d="取消订单失败",e.message(d,"error",2e3));case 11:case"end":return t.stop()}},t,e)}))()},formatterContactPerson:function(e){var t="";if(e){var r=e.phoneTechType;1==r?t="en"==this.primaryLangID?"Voice call":"语音电话":2==r?t="en"==this.primaryLangID?"Fax":"传真":3==r?t="en"==this.primaryLangID?"Cellphone":"手机":4==r&&(t="en"==this.primaryLangID?"E-mail":"邮箱")}return t},formatterStatus:function(e){var t="",r=e;return 1==r?t="en"==this.primaryLangID?"To be confirmed":"待确认":2==r?t="en"==this.primaryLangID?"Confirmed - pending":"已确认-待处理":3==r?t="en"==this.primaryLangID?"Cancel in-pending":"取消中-待处理":4==r?t="en"==this.primaryLangID?"Confirmed - processed":"已确认-已处理":5==r&&(t="en"==this.primaryLangID?"Cancelled - processed":"已取消-已处理"),t},formatterConfirmType:function(e){var t="",r=e;return 1==r?t="en"==this.primaryLangID?"Check-in by person":"按入住人入住":2==r&&(t="en"==this.primaryLangID?"Check in by the confirmation number":"按确认号入住"),t},formatterRejectType:function(e){var t="",r=e;return 1==r?t="en"==this.primaryLangID?"No vacancy":"满房":2==r?t="en"==this.primaryLangID?"Price is wrong":"房价不对":3==r&&(t="en"==this.primaryLangID?"Other reason":"其他原因"),t},formatterRemark:function(t){t&&setTimeout(function(){e("#orderRemark").html(t)},300)},dateToStr:function(e){var t=new Date(1*e.slice(e.indexOf("(")+1,e.indexOf("+"))),r=t.getFullYear(),n=t.getMonth(),a=t.getMonth()+1;e=t.getDate();return n<10&&(n="0"+n),a<10&&(a="0"+a),e<10&&(e="0"+e),r+"-"+a+"-"+e},message:function(e,t,r){this.$message({message:e,duration:r,type:t})}}),computed:f({},Object(l.c)(["primaryLangID"])),created:function(){this.$route.query.orderID&&this.$route.query.distributorOrderID?(this.orderID=JSON.parse(this.$route.query.orderID)+"",this.distributorOrderID=JSON.parse(this.$route.query.distributorOrderID)+"",this.reqOrderDetail()):this.$router.push({name:"hotelList"})},mounted:function(){this.choiceMenuId("hotelList")},beforeDestroy:function(){},destroyed:function(){}}}).call(t,r("7t+N"))},tyDO:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("FS42"),a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"myOrderDetail",attrs:{"element-loading-text":"en"==e.primaryLangID?"Loading":"订单数据加载中"}},[r("el-dialog",{attrs:{title:"取消订单",visible:e.isToDelete,top:"30vh",width:"400px"},on:{"update:visible":function(t){e.isToDelete=t}}},[r("el-form",{staticClass:"deleteForm",staticStyle:{"text-align":"center"},attrs:{inline:!0}},[r("el-form-item",{staticStyle:{"margin-top":"15px"},attrs:{label:"取消原因"}},[r("el-select",{attrs:{placeholder:"请选择取消原因"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[r("el-option",{attrs:{label:"满房",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"房价不对",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"其他原因",value:"3"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"原因描述"}},[r("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off",placeholder:"请描述取消原因"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.toCancle}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.reqOrderDetail(!0)}}},[e._v("确 定")])],1)],1),e._v(" "),r("div",{staticClass:"myOrderDetail-navDiv"},[r("div",{staticClass:"myOrderDetail-breadcrumbDiv"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v(e._s(e.$t("m.hotelManagement")))]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{name:"hotelList"}}},[e._v(e._s(e.$t("m.hotelList")))]),e._v(" "),r("el-breadcrumb-item",[e._v(e._s(e.$t("m.orderManagement")))])],1)],1),e._v(" "),r("div",{staticClass:"myOrderDetail-bigTitleDiv"},[r("h1",{staticClass:"bigTitle"},[e._v(e._s(e.$t("m.orderDetail")))]),e._v(" "),r("div",{staticClass:"tabsDiv"},[2==e.orderDetailInfo.orderStatus||1==e.orderDetailInfo.orderStatus?r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.toCancleOrder}},[e._v(e._s(e.$t("m.cancleOrder")))]):e._e()],1)])]),e._v(" "),e.error?e._e():r("div",{staticClass:"myOrderDetail-mainContentDiv"},[r("div",{staticClass:"myOrderInfoDiv"},[r("ul",{staticClass:"infoUl"},[e.orderDetailInfo.orderID?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.orderId"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.orderID)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.distributorOrderID?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.distributorOrderID"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.distributorOrderID)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.hotelID?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.hotelId"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.hotelID)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.roomID?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.roomId"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.roomID)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.quantity?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s("en"==e.primaryLangID?"Number of rooms":"预订间数")+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.quantity)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.personCount?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.numberOfTheGuest"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.personCount)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.dateRange&&e.orderDetailInfo.dateRange.start?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.CheckInDate"))+"：")]),e._v("\n          "+e._s(e.dateToStr(e.orderDetailInfo.dateRange.start))+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.dateRange&&e.orderDetailInfo.dateRange.end?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.CheckOutDate"))+"：")]),e._v("\n          "+e._s(e.dateToStr(e.orderDetailInfo.dateRange.end))+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.name?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.contactName"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.name)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.phone?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.contactPhone"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.phone)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.contactPerson?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.formatterContactPerson(e.orderDetailInfo.contactPerson))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.contactPerson?e.orderDetailInfo.contactPerson.phoneNumber:"-")+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.lastArrivalTime?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.theLatestArrivalTime"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.lastArrivalTime)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.totalAmount?r("li",{staticClass:"infoLi overnone"},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.totalAmount"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.totalAmount.currency)+e._s(" ")+e._s(e.orderDetailInfo.totalAmount.amount)+"\n        ")]):e._e(),e._v(" "),0==e.orderDetailInfo.orderStatus||e.orderDetailInfo.orderStatus?r("li",{staticClass:"infoLi overnone",staticStyle:{width:"100%"}},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.orderStatus"))+"：")]),e._v("\n          "+e._s(e.formatterStatus(e.orderDetailInfo.orderStatus))+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.orderConfirmType?r("li",{staticClass:"infoLi overnone",staticStyle:{width:"100%"}},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.orderConfirmType"))+"：")]),e._v("\n          "+e._s(e.formatterConfirmType(e.orderDetailInfo.orderConfirmType))+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.orderConfirmNo?r("li",{staticClass:"infoLi overnone",staticStyle:{width:"100%"}},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.orderConfirmNo"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.orderConfirmNo)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.companyConfirmNo?r("li",{staticClass:"infoLi overnone",staticStyle:{width:"100%"}},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.companyConfirmNo"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.companyConfirmNo)+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.orderRejectType?r("li",{staticClass:"infoLi overnone",staticStyle:{width:"100%"}},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.orderRejectType"))+"：")]),e._v("\n          "+e._s(e.formatterRejectType(e.orderDetailInfo.orderRejectType))+"\n        ")]):e._e(),e._v(" "),e.orderDetailInfo.orderRejectReason?r("li",{staticClass:"infoLi overnone",staticStyle:{width:"100%"}},[r("span",{staticClass:"infoLiSpan"},[e._v(e._s(e.$t("m.orderRejectReason"))+"：")]),e._v("\n          "+e._s(e.orderDetailInfo.orderRejectReason)+"\n        ")]):e._e()]),e._v(" "),r("div",{staticClass:"statementDiv"},[e.orderDetailInfo.remark?r("div",{staticClass:"descriptions"},[r("span",{staticClass:"descriptionsSpan"},[e._v("\n              "+e._s(e.$t("m.remark"))+"：\n            ")]),e._v(" "),r("div",{staticClass:"descriptionsDiv"},[r("span",{attrs:{id:"orderRemark"}}),e._v("\n            "+e._s(e.formatterRemark(e.orderDetailInfo.remark))+"\n          ")])]):e._e(),e._v(" "),e.orderDetailInfo.persons?r("div",{staticClass:"descriptions",staticStyle:{margin:"30px 0!important"}},[r("span",{staticClass:"descriptionsSpan"},[e._v("\n            "+e._s(e.$t("m.lodger"))+"：\n          ")]),e._v(" "),r("div",{staticClass:"descriptionsDiv"},[r("span",e._l(e.orderDetailInfo.persons,function(t,n){return r("ul",{key:n,staticClass:"prtsonUl"},[r("span",{staticClass:"leftTitle"},[e._v("\n                    "+e._s(e.$t("m.lodger"))+e._s(n+1)+e._s("en"==e.primaryLangID?"  Name":"   姓名")+"：\n                  ")]),e._v(" "),r("span",{staticClass:"rightContent"},[r("li",{staticClass:"policyLi",staticStyle:{"list-style-type":"none!important"}},[r("span",[e._v(e._s(t.name))])])])])}),0)])]):e._e()])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"myOrderDetail-mainContentDiv"},[r("div",{staticClass:"myHotelDetail-emptyDiv"},[r("Empty",{attrs:{message:"找不到该订单详细信息"}})],1)])],1)},staticRenderFns:[]};var o=function(e){r("C7be")},i=r("VU/8")(n.a,a,!1,o,null,null);t.default=i.exports}});