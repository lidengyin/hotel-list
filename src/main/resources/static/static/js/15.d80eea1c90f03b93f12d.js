webpackJsonp([15],{R639:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),s=a.n(n),o=a("NC6I"),r=a.n(o),i=a("D2Ra"),l=a("NYxO"),c=(a("kw8N"),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};function h(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(s,o){try{var r=e[s](o),i=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(i).then(function(t){n("next",t)},function(t){n("throw",t)});t(i)}("next")})}}var p={data:function(){return{loading:!1,countrys:[],countryID:"",cityNum:1,citySize:1e4,citys:[],hotelType:0,saveHotelType:0,hoteltypes:[{name:"落地模式",Ename:"The ground pattern",value:0},{name:"透传模式",Ename:"Passthrough mode",value:1}],starsNums:[{starEName:"1 star",starName:"1星级",value:1,stars:[1]},{starEName:"2 stars",starName:"2星级",value:2,stars:[2]},{starEName:"3 stars",starName:"3星级",value:3,stars:[3]},{starEName:"4 stars",starName:"4星级",value:4,stars:[4]},{starEName:"5 stars",starName:"5星级",value:5,stars:[5]},{starEName:"all",starName:"不限",value:6,stars:[0,1,2,3,4,5]}],starsIndex:6,hotelNum:1,hotelSize:10,provinceID:1,cityID:"",stars:[1,2,3,4,5],Pages:{},hotels:[],hotellists:[],hotelLists:[],hotelID:"",extendedNode:["HotelStaticInfo.GeoInfo","HotelStaticInfo.NearbyPOIs","HotelStaticInfo.TransportationInfos","HotelStaticInfo.Brand","HotelStaticInfo.Policies","HotelStaticInfo.ImportantNotices","HotelStaticInfo.Facilities","HotelStaticInfo.Descriptions","HotelStaticInfo.Themes","HotelStaticInfo.ContactInfo","HotelStaticInfo.SupplierInfo","HotelStaticInfo.Pictures"]}},computed:u({},Object(l.c)(["primaryLangID","hoteltype"])),created:function(){this.reqCountrys()},mounted:function(){this.choiceMenuId("hotelList")},methods:u({},Object(l.b)(["choiceMenuId","setHotelType"]),{handleSizeChange:function(t){this.reqHotels(t)},handleCurrentChange:function(t){this.reqHotels(t)},returnHeaders:function(t){var e=(new Date).getTime()+"",a={timestamp:e,interfacekey:"15456a8b-f9b3-4e39-83cf-7186b9cb6336",requesttype:t,signature:r()(e+109+r()("15456a8b-f9b3-4e39-83cf-7186b9cb6336").toUpperCase()+104+t).toUpperCase(),"Content-Type":"application/json;charset=UTF-8"};return this.hoteltype?a.hoteltype="3":a.masterhotelmode="T",a},reqCountrys:function(){var t=this;return h(s.a.mark(function e(){var a,n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.returnHeaders("GET_COUNTRY_LIST",!1),e.next=3,Object(i.d)({},a);case 3:n=e.sent,(o=n.ResponseStatus)&&0==o.Errors.length?(t.countrys=n.countryInfoList.countryInfo,""==t.countryID&&(t.countryID=t.countrys[0].countryID)):(r="en"==t.primaryLangID?"Failed to get the list of countries":"获取国家列表失败，请刷新重试",t.message(r,"error",1200));case 6:case"end":return e.stop()}},e,t)}))()},reqCitys:function(){var t=this;return h(s.a.mark(function e(){var a,n,o,r,l,c,u,h,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.cityNum,n=t.citySize,!(o=t.countryID)){e.next=12;break}return r=t.returnHeaders("GET_CITY_LIST",!1),l={countryID:o},c={pageSize:n,currentPageIndex:a},e.next=9,Object(i.c)({searchCandidate:l,pagingSettings:c},r);case 9:u=e.sent,(h=u.ResponseStatus)&&0==h.Errors.length?(t.citys=u.cityInfoList.cityInfo,""==t.cityID?(t.cityID=t.citys[0].cityID,t.provinceID=t.citys[0].provinceID,t.reqHotels(1)):(t.cityID=t.citys[0].cityID,t.provinceID=t.citys[0].provinceID)):(p="en"==t.primaryLangID?"Failed to get the list of cities":"获取城市列表失败，请刷新重试",t.message(p,"error",1200));case 12:case"end":return e.stop()}},e,t)}))()},reqHotels:function(t){var e=this;this.hotelNum=t,this.setHotelType(this.hotelType),setTimeout(h(s.a.mark(function t(){var a,n,o,r,l,c,u,h,p,m,y;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stars=e.starsNums[e.starsIndex-1].stars,a=e.hotelNum,n=e.hotelSize,o=e.cityID,r=e.provinceID,l=e.stars,!a||!n){t.next=13;break}return c=e.returnHeaders("GET_HOTEL_LIST"),u={cityID:o,provinceID:r,stars:l},h={pageSize:n,currentPageIndex:a},t.next=10,Object(i.f)({searchCandidate:u,pagingSettings:h},c);case 10:p=t.sent,(m=p.ResponseStatus)&&0==m.Errors.length?(e.saveHotelType=e.hotelType,e.Pages=p.pagingInfo||{},e.hotels=p.hotelIDList?p.hotelIDList.hotelID:[]):(y="en"==e.primaryLangID?"Failed to get the list of hotels":"获取酒店列表失败，请刷新重试",m.Errors[0].Message&&(y=m.Errors[0].Message),e.message(y,"error",2e3));case 13:case"end":return t.stop()}},t,e)})),300)},reqHotelsStatic:function(t){var e=this;return h(s.a.mark(function a(){var n,o,r,l,u,h,p,m,y;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.extendedNode,o=e.primaryLangID,!t){a.next=12;break}return r=e.returnHeaders("GET_HOTEL_STATICINFO"),l={hotelID:t},u={primaryLangID:o,extendedNodes:{extendedNode:n}},a.next=8,Object(i.j)({searchCandidate:l,settings:u},r);case 8:h=a.sent,(p=h.ResponseStatus)&&0==p.Errors.length?e.hotellists[e.hotels.indexOf(t)]=h.hotelStaticInfo:e.hotellists[e.hotels.indexOf(t)]=[],e.hotellists.length==e.hotels.length&&(m=0,e.hotellists.map(function(t){(void 0===t||c(t))&&(m++,t.starRating||(t.starRating=0))}),m==e.hotels.length&&(e.hotelLists=e.hotellists,e.loading=!1,y=0,e.hotelLists.map(function(t){(void 0===t||c(t))&&(t.hotelID=e.hotels[y],y++)}),e.hotelLists=e.hotellists.filter(function(t){return t.contactInfo})));case 12:case"end":return a.stop()}},a,e)}))()},goToDetail:function(t){this.hotelID=t.hotelID;var e=this.$router.resolve({name:"hotelDeatil",query:{hotelID:JSON.stringify(this.hotelID),hoteltype:JSON.stringify(this.saveHotelType)}}).href;window.open(e,"_blank")},formatterAddress:function(t){if(t){var e=t.city,a=t.area,n=t.addressLine;return(e?e.name:"")+(a?a.name:"")+(n||"")}return"-"},formatterRating:function(t,e){return t.isOfficialRating?"en"==this.primaryLangID?"True":"是":"en"==this.primaryLangID?"False":"否"},formatterOpenYear:function(t,e){return t.openYear?t.openYear.slice(0,10):"-"},message:function(t,e,a){this.$message({message:t,duration:a,type:e})}}),watch:{countryID:function(t,e){this.reqCitys()},cityID:function(t,e){var a=this;this.citys.map(function(e){e.cityID==t&&(a.provinceID=e.provinceID)})},hotels:function(t,e){var a=this;this.hotellists=[],this.hotelLists=[],t.length&&(this.loading=!0,t.map(function(t){a.reqHotelsStatic(t)}))},primaryLangID:function(t,e){var a=this;this.hotels?(this.hotellists=[],this.hotelLists=[],this.hotels.length&&this.hotels.map(function(t){a.reqHotelsStatic(t)})):this.reqHotels()}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myHotelList"},[a("div",{staticStyle:{padding:"20px"}},[a("h3",{staticClass:"myHotelList-bigTtitle"},[t._v(t._s(t.$t("m.hotelList"))+"：")]),t._v(" "),a("ul",{staticClass:"myHotelList-conditionUl"},[a("li",{staticClass:"myHotelList-conditionLi"},[a("span",{staticClass:"myHotelList-conditionSpan"},[t._v(t._s(t.$t("m.country"))+"：")]),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择国家"},model:{value:t.countryID,callback:function(e){t.countryID=e},expression:"countryID"}},t._l(t.countrys,function(t){return a("el-option",{key:t.value,attrs:{label:t.countryName,value:t.countryID}})}),1)],1),t._v(" "),a("li",{staticClass:"myHotelList-conditionLi"},[a("span",{staticClass:"myHotelList-conditionSpan"},[t._v(t._s(t.$t("m.city"))+"：")]),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择城市"},model:{value:t.cityID,callback:function(e){t.cityID=e},expression:"cityID"}},t._l(t.citys,function(e){return a("el-option",{key:e.value,attrs:{label:"en"==t.primaryLangID?e.cityEName:e.cityName,value:e.cityID}})}),1)],1),t._v(" "),a("li",{staticClass:"myHotelList-conditionLi"},[a("span",{staticClass:"myHotelList-conditionSpan"},[t._v(t._s(t.$t("m.starRating"))+"：")]),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择酒店星级"},model:{value:t.starsIndex,callback:function(e){t.starsIndex=e},expression:"starsIndex"}},t._l(t.starsNums,function(e){return a("el-option",{key:e.value,attrs:{label:"en"==t.primaryLangID?e.starEName:e.starName,value:e.value}})}),1)],1),t._v(" "),a("li",{staticClass:"myHotelList-conditionLi"},[a("span",{staticClass:"myHotelList-conditionSpan"},[t._v(t._s(t.$t("m.hotelType"))+"：")]),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择酒店类型"},model:{value:t.hotelType,callback:function(e){t.hotelType=e},expression:"hotelType"}},t._l(t.hoteltypes,function(e){return a("el-option",{key:e.value,attrs:{label:"en"==t.primaryLangID?e.Ename:e.name,value:e.value}})}),1)],1),t._v(" "),a("li",{staticClass:"myHotelList-conditionLi"},[a("el-button",{staticClass:"hotelButton",attrs:{type:"primary"},on:{click:function(e){return t.reqHotels(1)}}},[t._v(t._s(t.$t("m.search")))])],1)]),t._v(" "),a("div",{staticClass:"myHotelList-biaoGeDiv"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"lis",attrs:{"element-loading-text":"en"==t.primaryLangID?"Loading":"酒店数据加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.hotelLists,stripe:"",border:"","empty-text":t.$t("m.emptyHotelList")}},[a("el-table-column",{attrs:{label:t.$t("m.hotelID"),"min-width":"80",prop:"hotelID"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("m.hotelName"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{target:"_blank",to:{name:"hotelDeatil",query:{hotelID:JSON.stringify(e.row.hotelID),hoteltype:JSON.stringify(t.hoteltype)}}}},[a("span",{staticClass:"overnone",staticStyle:{"text-align":"left!important",display:"inline-block",width:"100%"},attrs:{title:"en"==t.primaryLangID&&e.row.hotelEName||e.row.hotelName}},[t._v(t._s("en"==t.primaryLangID&&e.row.hotelEName||e.row.hotelName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("m.starRating"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:e.row.starRating,callback:function(a){t.$set(e.row,"starRating",a)},expression:"scope.row.starRating"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("m.address"),"min-width":"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"overnone",staticStyle:{"text-align":"center!important",display:"inline-block",width:"100%"}},[t._v(t._s(t.formatterAddress(e.row.address)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("m.openYear"),"min-width":"120",formatter:t.formatterOpenYear}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("m.isOfficialRating"),"min-width":"120",formatter:t.formatterRating}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("m.operate"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"hotelButton",attrs:{type:"text"},on:{click:function(a){return t.goToDetail(e.row)}}},[t._v(t._s(t.$t("m.viewDetails")))])]}}])})],1)],1),t._v(" "),t.Pages.totalRecords?a("div",{staticClass:"pc"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.hotellists.length,expression:"hotellists.length"}],attrs:{"current-page":t.hotelNum,"page-size":t.hotelSize,layout:"total, prev, pager, next, jumper",total:t.Pages.totalRecords},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])])])},staticRenderFns:[]};var y=a("VU/8")(p,m,!1,function(t){a("SbRK")},null,null);e.default=y.exports},SbRK:function(t,e){}});