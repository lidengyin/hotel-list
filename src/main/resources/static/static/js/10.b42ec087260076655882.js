webpackJsonp([10],{PrNC:function(e,t){},pPqT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Xxa5"),a=r.n(n),i=r("NC6I"),o=r.n(i),s=r("D2Ra"),c=r("NYxO"),l=(r("kw8N"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e});var d={data:function(){return{loading:!1,time:"",orders:[],orderLists:[],pickerOptions:{shortcuts:[{text:"最近3小时",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-108e5),e.$emit("pick",[r,t])}}]}}},computed:l({},Object(c.c)(["primaryLangID"])),created:function(){var e=this.dateToStr(new Date,2),t=this.dateToStr(new Date((new Date).getTime()-108e5),2);this.time=[new Date(t.year,t.month,t.date,t.hour,t.minutes),new Date(e.year,e.month,e.date,e.hour,e.minutes)],this.reqOrderChange()},mounted:function(){this.choiceMenuId("orderChange")},methods:l({},Object(c.b)(["choiceMenuId"]),{returnHeaders:function(e){var t=(new Date).getTime()+"",r={timestamp:t,interfacekey:"15456a8b-f9b3-4e39-83cf-7186b9cb6336",requesttype:e,signature:o()(t+109+o()("15456a8b-f9b3-4e39-83cf-7186b9cb6336").toUpperCase()+104+e).toUpperCase(),"Content-Type":"application/json;charset=UTF-8"};return this.hoteltype&&(r.hoteltype="3"),r},reqOrderChange:function(){var e,t=this;return(e=a.a.mark(function e(){var r,n,i,o,c,l,d,m,u,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.time)&&r[1].getTime()-r[0].getTime()<=108e5)){e.next=18;break}return n=t.dateToStr(r[0],2),i=t.dateToStr(r[1],2),o=n.year+"-"+n.month1+"-"+n.date+" "+n.hour+":"+n.minutes+":00",c=i.year+"-"+i.month1+"-"+i.date+" "+i.hour+":"+i.minutes+":00",l=t.returnHeaders("ORDER_NOTIFY"),d={startTime:o,endTime:c},t.loading=!0,e.next=11,Object(s.z)({searchCandidate:d},l);case 11:m=e.sent,t.loading=!1,u=m.ResponseStatus,console.log(m),u&&0==u.Errors.length?m.orderNotifies&&m.orderNotifies.orderNotify&&m.orderNotifies.orderNotify.length?t.orders=m.orderNotifies.orderNotify:t.orders=[]:(t.orders=[],p="en"==t.primaryLangID?"Failed to obtain order list, please refresh and try again":"获取订单变化通知列表失败，请刷新重试",t.message(p,"error",1200)),e.next=20;break;case 18:p="en"==t.primaryLangID?"The interval must not be greater than 3 hours":"时间间隔不能大于3小时",t.message(p,"warning",1500);case 20:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var o=t[a](i),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})})()},formatterChangeTime:function(e){var t=1*e.slice(e.indexOf("(")+1,e.indexOf("+")),r=new Date(t);return this.dateToStr(r)},formatterStatus:function(e){var t="",r=e;return 1==r?t="en"==this.primaryLangID?"To be confirmed":"待确认":2==r?t="en"==this.primaryLangID?"Confirmed - pending":"已确认-待处理":3==r?t="en"==this.primaryLangID?"Cancel in-pending":"取消中-待处理":4==r?t="en"==this.primaryLangID?"Confirmed - processed":"已确认-已处理":5==r&&(t="en"==this.primaryLangID?"Cancelled - processed":"已取消-已处理"),t},message:function(e,t,r){this.$message({message:e,duration:r,type:t})},dateToStr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.getFullYear(),n=e.getMonth(),a=e.getMonth()+1,i=e.getDate(),o=e.getHours(),s=e.getMinutes(),c=e.getSeconds();if(n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),o<10&&(o="0"+o),s<10&&(s="0"+s),c<10&&(c="0"+c),1==t)var l=r+"-"+a+"-"+i+" "+o+":"+s+":"+c;if(2==t)l={year:r,month:n,date:i,hour:o,minutes:s,month1:a};return l},goToDetail:function(e){this.$router.push({name:"hotelDeatil",query:{hotelID:JSON.stringify(e.hotelID),hoteltype:JSON.stringify(1)}})}}),watch:{primaryLangID:function(e,t){this.pickerOptions="en"==e?{shortcuts:[{text:"Last 3 hours",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-108e5),e.$emit("pick",[r,t])}}]}:{shortcuts:[{text:"最近3小时",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-108e5),e.$emit("pick",[r,t])}}]}}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"myHotelChange"},[r("div",{staticStyle:{padding:"20px"}},[r("h3",{staticClass:"myHotelList-bigTtitle"},[e._v(e._s(e.$t("m.orderChangeList"))+"：")]),e._v(" "),r("ul",{staticClass:"myHotelList-conditionUl"},[r("li",{staticClass:"myHotelList-conditionLi"},[r("span",{staticClass:"myHotelList-conditionSpan"},[e._v(e._s(e.$t("m.timeQuantum3"))+"：")]),e._v(" "),r("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"start-placeholder":"en"==e.primaryLangID?"Start":"开始日期","end-placeholder":"en"==e.primaryLangID?"End":"结束日期","range-separator":"en"==e.primaryLangID?"to":"至",align:"right"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),r("li",{staticClass:"myHotelList-conditionLi"},[r("el-button",{staticClass:"hotelButton",attrs:{type:"primary"},on:{click:function(t){return e.reqOrderChange()}}},[e._v(e._s(e.$t("m.search")))])],1)]),e._v(" "),r("div",{staticClass:"myHotelList-biaoGeDiv"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"lis",attrs:{"element-loading-text":"en"==e.primaryLangID?"Loading":"订单变化数据加载中"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orders,stripe:"",border:"","empty-text":e.$t("m.emptyOrderChangeList")}},[r("el-table-column",{attrs:{label:e.$t("m.orderId"),"min-width":"80",prop:"orderID"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("m.updateTime"),"min-width":"80",prop:"changeTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{"margin-right":"20px"}},[e._v(e._s(e.formatterChangeTime(t.row.changeTime).slice(0,11)))]),e._v(" "),r("span",[e._v(e._s(e.formatterChangeTime(t.row.changeTime).slice(11,20)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("m.orderStatus"),"min-width":"80",prop:"orderStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.formatterStatus(t.row.orderStatus)))])]}}])})],1)],1)])])])},staticRenderFns:[]};var u=r("VU/8")(d,m,!1,function(e){r("PrNC")},null,null);t.default=u.exports}});