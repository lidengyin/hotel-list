webpackJsonp([15],{"7U3n":function(t,e){},hpJp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),i=n("NC6I"),o=n.n(i),s=n("D2Ra"),c=n("NYxO"),l=(n("kw8N"),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t});function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(r,i){try{var o=e[r](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){a("next",t)},function(t){a("throw",t)});t(s)}("next")})}}var h={data:function(){return{loading:!1,countrys:[],countryID:"",cityNum:1,citySize:1e4,citys:[],pickerOptions:{shortcuts:[{text:"最近30分钟",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-18e5),t.$emit("pick",[n,e])}}]},time:"",pageNum:0,recordId:["0","0"],pageSize:1e3,cityID:"",HotelInfoNum:0,hotels:[],hotelLists:[],hotelID:"",extendedNode:["HotelStaticInfo.GeoInfo","HotelStaticInfo.NearbyPOIs","HotelStaticInfo.TransportationInfos","HotelStaticInfo.Brand","HotelStaticInfo.Policies","HotelStaticInfo.ImportantNotices","HotelStaticInfo.Facilities","HotelStaticInfo.Descriptions","HotelStaticInfo.Themes","HotelStaticInfo.ContactInfo","HotelStaticInfo.SupplierInfo","HotelStaticInfo.Pictures"]}},computed:l({},Object(c.c)(["primaryLangID"])),created:function(){this.reqCountrys();var t=this.dateToStr(new Date),e=this.dateToStr(new Date((new Date).getTime()-18e5));this.time=[new Date(e.year,e.month,e.date,e.hour,e.minutes),new Date(t.year,t.month,t.date,t.hour,t.minutes)]},mounted:function(){this.choiceMenuId("landingHotelChange")},methods:l({},Object(c.b)(["choiceMenuId"]),{returnHeaders:function(t){var e=(new Date).getTime()+"";return{timestamp:e,interfacekey:"15456a8b-f9b3-4e39-83cf-7186b9cb6336",requesttype:t,signature:o()(e+109+o()("15456a8b-f9b3-4e39-83cf-7186b9cb6336").toUpperCase()+104+t).toUpperCase(),masterhotelmode:"T","Content-Type":"application/json;charset=UTF-8"}},reqCountrys:function(){var t=this;return u(r.a.mark(function e(){var n,a,i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.returnHeaders("GET_COUNTRY_LIST"),e.next=3,Object(s.g)({},n);case 3:a=e.sent,(i=a.ResponseStatus)&&0==i.Errors.length?(t.countrys=a.countryInfoList.countryInfo,""==t.countryID&&(t.countryID=t.countrys[0].countryID)):(o="en"==t.primaryLangID?"Failed to get the list of countries":"获取国家列表失败，请刷新重试",t.message(o,"error",1200));case 6:case"end":return e.stop()}},e,t)}))()},reqCitys:function(){var t=this;return u(r.a.mark(function e(){var n,a,i,o,c,l,u,h,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.cityNum,a=t.citySize,!(i=t.countryID)){e.next=12;break}return o=t.returnHeaders("GET_CITY_LIST"),c={countryID:i},l={pageSize:a,currentPageIndex:n},e.next=9,Object(s.f)({searchCandidate:c,pagingSettings:l},o);case 9:u=e.sent,(h=u.ResponseStatus)&&0==h.Errors.length?(t.citys=u.cityInfoList.cityInfo,""==t.cityID?(t.cityID=t.citys[0].cityID,t.toSearch("next")):t.cityID=t.citys[0].cityID):(m="en"==t.primaryLangID?"Failed to get the list of cities":"获取城市列表失败，请刷新重试",t.message(m,"error",1200));case 12:case"end":return e.stop()}},e,t)}))()},handleCurrentChange:function(t){this.toSearch(t)},search:function(t){this.pageNum=0,this.recordId=["0","0"],this.toSearch(t)},toSearch:function(t){var e=this.time;if(e&&e[1].getTime()-e[0].getTime()<=18e5){var n=this.dateToStr(e[0]),a=this.dateToStr(e[1]);n=n.year+"-"+n.month1+"-"+n.date+" "+n.hour+":"+n.minutes+":00",a=a.year+"-"+a.month1+"-"+a.date+" "+a.hour+":"+a.minutes+":00",this.reqHotelsChange(n,a,t)}else{var r="en"==this.primaryLangID?"The interval must not be greater than 30 minutes":"时间间隔不能大于30分钟";this.message(r,"warning",1500)}},reqHotelsChange:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next";return u(r.a.mark(function i(){var o,c,l,u,h,m,p,d,g,f,y,I,v;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("last"==a?n.pageNum--:n.pageNum++,o=n.pageSize,c=n.cityID,l=n.countryID,u=n.recordId,h=n.pageNum,!t||!e){r.next=15;break}return m=n.returnHeaders("GET_STATICINFO_CHANGE"),p=u[h],d={pageSize:o,lastRecordId:p},g={dateTimeRange:{start:t,end:e},countryID:l,cityID:c},n.loading=!0,r.next=11,Object(s.o)({searchCandidate:g,pagingSettings:d},m);case 11:f=r.sent,n.loading=!1,(y=f.ResponseStatus)&&0==y.Errors.length?(f.changeInfoList&&f.changeInfoList.changeInfo&&f.changeInfoList.changeInfo.length?n.hotels=f.changeInfoList.changeInfo:n.hotels=[],n.hotels.length<n.pageSize?n.recordId[n.pageNum+1]="end":"next"==a&&f.pagingInfo?(I=f.pagingInfo.lastRecordId,n.recordId[n.pageNum+1]=void 0!=I?I:"end"):n.recordId[n.pageNum+1]="end"):(n.hotels=[],v="en"==n.primaryLangID?"Failed to obtain incremental list, please refresh and try again":"获取酒店静态信息增量列表失败，请刷新重试",y.Errors[0].Message&&(v=y.Errors[0].Message),n.message(v,"error",1500));case 15:case"end":return r.stop()}},i,n)}))()},reqHotelsStatic:function(t){var e=this;return u(r.a.mark(function n(){var a,i,o,c,l,u,h;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.extendedNode,i=e.primaryLangID,!t){n.next=19;break}return e.loading=!0,o=e.returnHeaders("GET_HOTEL_STATICINFO"),c={hotelID:t},l={primaryLangID:i,extendedNodes:{extendedNode:a}},n.next=9,Object(s.m)({searchCandidate:c,settings:l},o);case 9:if(u=n.sent,h=u.ResponseStatus,e.HotelInfoNum++,!h||0!=h.Errors.length){n.next=16;break}return n.abrupt("return",u.hotelStaticInfo||[]);case 16:return n.abrupt("return",[]);case 17:n.next=21;break;case 19:return e.HotelInfoNum++,n.abrupt("return",[]);case 21:case"end":return n.stop()}},n,e)}))()},goToDetail:function(t){this.hotelID=t.hotelID;var e=this.$router.resolve({name:"hotelDeatil",query:{hotelID:JSON.stringify(this.hotelID),hoteltype:JSON.stringify(0)}}).href;window.open(e,"_blank")},formatterOpenYear:function(t,e){return t.openYear?t.openYear.slice(0,10):"-"},formatterType:function(t,e){return t.changeType?"All"==t.changeType?"en"==this.primaryLangID?"Room & Hotel":"酒店及房型":"Room"==t.changeType?"en"==this.primaryLangID?"Room":"房型":"Hotel"==t.changeType?"en"==this.primaryLangID?"Hotel":"酒店":void 0:"-"},dateToStr:function(t){var e=t.getFullYear(),n=t.getMonth(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),o=t.getMinutes();t.getSeconds();return n<10&&(n="0"+n),a<10&&(a="0"+a),r<10&&(r="0"+r),i<10&&(i="0"+i),o<10&&(o="0"+o),{year:e,month:n,date:r,hour:i,minutes:o,month1:a}},message:function(t,e,n){this.$message({message:t,duration:n,type:e})}}),watch:{countryID:function(t,e){this.reqCitys()},hotels:function(t,e){var n,a=this;this.hotelLists=[],t.length&&this.hotelLists.length!=t.length&&(this.HotelInfoNum=0,t.map((n=u(r.a.mark(function t(e){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.reqHotelsStatic(e.hotelID);case 2:n=t.sent,e.address=n.address,e.hotelName=n.hotelName,e.hotelEName=n.hotelEName,e.openYear=n.openYear,e.starRating=n.starRating;case 8:case"end":return t.stop()}},t,a)})),function(t){return n.apply(this,arguments)})),setTimeout(function(){a.hotelLists=t},500))},HotelInfoNum:function(t,e){t==this.hotels.length&&(this.loading=!1)},primaryLangID:function(t,e){this.pickerOptions="en"==t?{shortcuts:[{text:"Last 30 minutes",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-18e5),t.$emit("pick",[n,e])}}]}:{shortcuts:[{text:"最近30分钟",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-18e5),t.$emit("pick",[n,e])}}]}}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"myHotelList"},[n("div",{staticStyle:{padding:"20px"}},[n("h3",{staticClass:"myHotelList-bigTtitle"},[t._v(t._s(t.$t("m.HotelChangeLists"))+"：")]),t._v(" "),n("ul",{staticClass:"myHotelList-conditionUl"},[n("li",{staticClass:"myHotelList-conditionLi"},[n("span",{staticClass:"myHotelList-conditionSpan"},[t._v(t._s(t.$t("m.country"))+"：")]),t._v(" "),n("el-select",{attrs:{filterable:"",placeholder:"请选择国家"},model:{value:t.countryID,callback:function(e){t.countryID=e},expression:"countryID"}},t._l(t.countrys,function(t){return n("el-option",{key:t.value,attrs:{label:t.countryName,value:t.countryID}})}),1)],1),t._v(" "),n("li",{staticClass:"myHotelList-conditionLi"},[n("span",{staticClass:"myHotelList-conditionSpan"},[t._v(t._s(t.$t("m.city"))+"：")]),t._v(" "),n("el-select",{attrs:{filterable:"",placeholder:"请选择城市"},model:{value:t.cityID,callback:function(e){t.cityID=e},expression:"cityID"}},t._l(t.citys,function(e){return n("el-option",{key:e.value,attrs:{label:"en"==t.primaryLangID?e.cityEName:e.cityName,value:e.cityID}})}),1)],1),t._v(" "),n("li",{staticClass:"myHotelList-conditionLi"},[n("span",{staticClass:"myHotelList-conditionSpan"},[t._v(t._s(t.$t("m.timeQuantum1"))+"：")]),t._v(" "),n("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"start-placeholder":"en"==t.primaryLangID?"Start":"开始日期","end-placeholder":"en"==t.primaryLangID?"End":"结束日期","range-separator":"en"==t.primaryLangID?"to":"至",align:"right"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),n("li",{staticClass:"myHotelList-conditionLi"},[n("el-button",{staticClass:"hotelButton",attrs:{type:"primary"},on:{click:function(e){return t.search("next")}}},[t._v(t._s(t.$t("m.search")))])],1)]),t._v(" "),n("div",{staticClass:"myHotelList-biaoGeDiv"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"lis",attrs:{"element-loading-text":"en"==t.primaryLangID?"Loading":"酒店数据加载中"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.hotelLists,stripe:"",border:"","empty-text":t.$t("m.emptyHotelChangeList")}},[n("el-table-column",{attrs:{label:t.$t("m.hotelID"),"min-width":"80",prop:"hotelID"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("m.hotelName"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{target:"_blank",to:{name:"hotelDeatil",query:{hotelID:JSON.stringify(e.row.hotelID),hoteltype:JSON.stringify(0)}}}},[n("span",{staticClass:"overnone",staticStyle:{"text-align":"left!important",display:"inline-block",width:"100%"},attrs:{title:"en"==t.primaryLangID&&e.row.hotelEName||e.row.hotelName}},[t._v(t._s("en"==t.primaryLangID&&e.row.hotelEName||e.row.hotelName))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("m.starRating"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:e.row.starRating,callback:function(n){t.$set(e.row,"starRating",n)},expression:"scope.row.starRating"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("m.openYear"),"min-width":"120",formatter:t.formatterOpenYear}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("m.ChangeTheType"),"min-width":"120",formatter:t.formatterType}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("m.operate"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"hotelButton",attrs:{type:"text"},on:{click:function(n){return t.goToDetail(e.row)}}},[t._v(t._s(t.$t("m.viewDetails")))])]}}])})],1)],1)]),t._v(" "),"end"==t.recordId[t.pageNum+1]&&1!=t.pageNum?n("div",{staticClass:"myPages"},[n("el-row",[n("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",plain:"",disabled:"0"==t.recordId[t.pageNum]},on:{click:function(e){return t.handleCurrentChange("last")}}},[t._v(t._s(t.$t("m.last")))]),t._v(" "),n("el-button",{attrs:{type:"primary",plain:"",disabled:"end"==t.recordId[t.pageNum+1]},on:{click:function(e){return t.handleCurrentChange("next")}}},[t._v(t._s(t.$t("m.next"))),n("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1):t._e()])])},staticRenderFns:[]};var p=n("VU/8")(h,m,!1,function(t){n("7U3n")},null,null);e.default=p.exports}});